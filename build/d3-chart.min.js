!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.d3=t.d3||{})}(this,function(t){"use strict";function e(){function t(t){return d=B-M.left-M.right,h=L-M.top-M.bottom,t.each(function(){var t=d3.select(this).selectAll("svg").data(["d3-chart"]),i=t.enter().append("svg"),a=i.append("g");a.append("g").attr("class","x axis"),a.append("g").attr("class","y axis"),a.append("g").attr("class","x axis minor"),a.append("g").attr("class","y axis minor"),t=i.merge(t).attr("width",B).attr("height",L),a=t.select("g").attr("transform","translate("+M.left+","+M.top+")"),o(),e(a),s(a,"areagroup",N),s(a,"linegroup",q),s(a,"scattergroup",D),n(a),s(a,"bargroup",C),r(a),f(a)}),t.selectAll("svg > g")}function e(t){if(p&&(p.scale(g),t.select(".x.axis").attr("transform","translate(0,"+u(m)+")").style("shape-rendering","crispEdges").call(p)),_&&(_.scale(x),t.select(".y.axis").attr("transform","translate("+l(b)+",0)").style("shape-rendering","crispEdges").call(_)),y&&"boolean"==typeof y&&(y="2,2"),A&&"boolean"==typeof A&&(A="2,2"),y){var e=t.select(".x.axis.minor").attr("transform","translate(0,"+x.range()[0]+")").style("shape-rendering","crispEdges").call(d3.axisBottom(g).tickSizeInner(-h));e.selectAll("text").style("display","none"),e.selectAll(".domain").style("display","none"),e.selectAll("line").style("stroke","#777").style("stroke-opacity",.35).style("stroke-dasharray",y)}if(A){var n=t.select(".y.axis.minor").style("shape-rendering","crispEdges").call(d3.axisLeft(x).tickSizeInner(-d));n.selectAll("text").style("display","none"),n.selectAll(".domain").style("display","none"),n.selectAll("line").style("stroke","#777").style("stroke-opacity",.35).style("stroke-dasharray",A)}}function n(t){var e=t.selectAll("#m"+z).data(["mousearea"]);e.exit().remove(),e=e.enter().append("rect").attr("id","m"+z).merge(e).attr("width",d).attr("height",h).attr("stroke","none").attr("fill","none").attr("pointer-events","all");var n=[].concat(N,q,D);e.on("mousemove touchmove mouseover touchstart mouseout touchend touchcancel",function(){if(g.invert){var t=d3.mouse(this),e=g.invert(t[0]),r=t[1];n.forEach(function(t){if(t.hover_in()||t.hover()||t.hover_out()){var n=t.x_extent(),o=e>=n[0]&&e<=n[1],i=P>=n[0]&&P<=n[1],a=r<0||r>h;o?i?t.mouse_move(e):t.mouse_in():!!i&&t.mouse_out(),!!a&&t.mouse_out()}}),P=e}})}function r(t){if(v){var e=t.selectAll(".x.label").data([v]);e.enter().append("text").attr("class","x label").merge(e).style("font","10px sans-serif").style("text-anchor","end").attr("x",d-6).attr("y",u(m)-6).text(v)}if(w){var n=t.selectAll(".y.label").data([w]);n.enter().append("text").attr("class","y label").merge(n).style("font","10px sans-serif").style("text-anchor","end").attr("x",-6).attr("y",l(b)+14).attr("transform","rotate(-90)").text(w)}}function o(){g=g||d3.scaleLinear(),x=x||d3.scaleLinear(),g.range([0,d]),x.range([h,0]);var t=[].concat(N,C,q,D);if(k)g.domain(k);else{var e=d3.min(t,function(t){return d3.min(t.data(),t.x())}),n=d3.max(t,function(t){return d3.max(t.data(),t.x())});g.domain([e,n])}if(E)x.domain(E);else{var r=d3.min(t,function(t){return d3.min(t.data(),t.y?t.y():function(e){return d3.min([t.y0()(e),t.y1()(e)])})}),o=d3.max(t,function(t){return d3.max(t.data(),t.y?t.y():function(e){return d3.max([t.y0()(e),t.y1()(e)])})});x.domain([r,o])}}function i(t){return function(){return t}}function a(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return"a"+t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}function u(t){if("top"===t)return x.range()[1];if("string"==typeof t){if("%"===t.slice(-1)){var e=parseFloat(t)/100;return d3.interpolateNumber(x.range()[0],x.range()[1])(e)}if("px"===t.slice(-2))return parseFloat(t)}return x(t)?x(t):x.range()[0]}function l(t){if("right"===t)return g.range()[1];if("string"==typeof t){if("%"===t.slice(-1)){var e=parseFloat(t)/100;return d3.interpolateNumber(g.range()[0],g.range()[1])(e)}if("px"===t.slice(-2))return parseFloat(t)}return g(t)?g(t):g.range()[0]}function c(){return H>=J.length&&(H=0),J[H++]}function s(t,e,n){var r=t.selectAll("g").filter("."+e).data(n,function(t){return t.id()});r.exit().remove(),r.enter().append("g").attr("class",e).merge(r).each(function(t){t(d3.select(this))})}function f(t){G.forEach(function(e){var n=e.container(),r=!!n;n?(n=n.selectAll("svg").filter("#cl"+e.id()).data([e]),n=n.enter().append("svg").attr("id","cl"+e.id()).merge(n)):n=t,s(n,"legendgroup",[e]),r&&n.call(function(t){var e=t.node().getBBox();t.attr("width",e.width).attr("height",e.height),t.selectAll(".legendgroup").attr("transform","translate("+-e.x+","+-e.y+")")})}),t.selectAll(".legendgroup").each(function(){this.parentElement.appendChild(this)})}var d,h,g,p,m,y,v,x,_,b,A,w,k,E,O,F,I,P,z=a(),B=760,L=500,M={top:20,right:20,bottom:20,left:30},S=function(t){return t[0]},j=function(t){return t[1]},N=[],C=[],q=[],D=[],G=[],H=0,J=["#377eb8","#e41a1c","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"];return t.area=function(t){function e(t){o=e.x(),u=e.y0(),l=e.y1();var i=d3.area().x(function(t){return g(o(t))}).y0(function(t){return x(u(t))}).y1(function(t){return x(l(t))});t.attr("id",s),n=t.selectAll("path").data(function(t){return[t]}),p=t.selectAll(".hoverline").data(["hoverline"]),n=n.enter().append("path").attr("class","area").merge(n),p=p.enter().append("line").attr("class","hoverline").style("display","none").merge(p),r&&i.curve(r),n.attr("d",function(t){return i(t.data())}),d.each(function(t,e){n.attr(e,t)}),p.style("stroke",d3.color(d.get("fill")).darker()).style("shape-rendering","crispEdges")}var n,r,o,u,l,s=t||a(),f=[],d=d3.map();d.set("fill",c());var h,p,m=d3.bisector(function(t){return e.x()(t)}).left;return e.attr=function(t){return 1===arguments.length?d.get(t):(2===arguments.length&&d.set(arguments[0],arguments[1]),e)},e.curve=function(t){return arguments.length?(r=t,e):r},e.data=function(t){return arguments.length?(f=t,e):f},e.hover=function(t){return arguments.length?(h=t,e):h},e.id=function(t){return s},e.mouse_in=function(){p.style("display",null)},e.mouse_move=function(t){var n=m(f,t),r=f[n-1],o=f[n],i=r&&o?t-e.x()(r)>e.x()(o)-t?o:r:r?r:o;i&&p.attr("x1",g(e.x()(i))).attr("x2",g(e.x()(i))).attr("y1",x(e.y0()(i))).attr("y2",x(e.y1()(i))),"function"==typeof h&&h({id:s,x:e.x()(i),y0:e.y0()(i),y1:e.y1()(i)})},e.mouse_out=function(){p.style("display","none")},e.remove=function(){var t=N.indexOf(e);t!=-1&&N.splice(t,1)},e.x=function(t){return arguments.length?(o=t,e):o||S},e.y0=function(t){return arguments.length?(u="function"==typeof t?t:i(+t),e):u||i(d3.min(e.data(),e.y1()))},e.y1=function(t){return arguments.length?(l="function"==typeof t?t:i(+t),e):l||j},N.push(e),e},t.bar=function(t){function e(t){r=e.x(),o=e.y(),t.attr("id",s),n=t.selectAll(".bar").data(f),n=n.enter().append("rect").attr("class","bar").merge(n),n.on("mouseover touchstart",function(t,n,r){(e.hover_in()||e.hover()||e.hover_out())&&e.mouse_in.call(this,t,n,r)}),n.on("mousemove touchmove",function(t,n,r){(e.hover_in()||e.hover()||e.hover_out())&&e.mouse_move.call(this,t,n,r)}),n.on("mouseout touchend touchcancel",function(t,n,r){(e.hover_in()||e.hover()||e.hover_out())&&e.mouse_out.call(this,t,n,r)}),n.attr("x",function(t){return g(r(t))}).attr("y",function(t){return x(o(t))}).attr("width",g.bandwidth()).attr("height",function(t){return h-x(o(t))}),d.each(function(t,e){n.attr(e,t)}),p.each(function(t,e){n.style(e,t)})}var n,r,o,i,u,l,s=t||a(),f=[],d=d3.map();d.set("fill",c()),d.set("pointer-events","all");var p=d3.map();return p.set("shape-rendering","crispEdges"),e.attr=function(t){return 1===arguments.length?d.get(t):(2===arguments.length&&d.set(arguments[0],arguments[1]),e)},e.data=function(t){return arguments.length?(f=t,e):f},e.hover=function(t){return arguments.length?(i=t,e):i},e.hover_in=function(t){return arguments.length?(u=t,e):u},e.hover_out=function(t){return arguments.length?(l=t,e):l},e.id=function(){return s},e.mouse_in=function(t,e,n){var r=d3.select(n[e]);r.attr("fill",d3.color(d.get("fill")).darker()),"function"==typeof u&&u.call(this,t,e,n)},e.mouse_move=function(t,e,n){"function"==typeof i&&i.call(this,t,e,n)},e.mouse_out=function(t,e,n){var r=d3.select(n[e]);r.attr("fill",d.get("fill")),"function"==typeof l&&l.call(this,t,e,n)},e.style=function(t){return 1===arguments.length?p.get(t):(2===arguments.length&&p.set(arguments[0],arguments[1]),e)},e.x=function(t){return arguments.length?(r=t,e):r||S},e.y=function(t){return arguments.length?(o=t,e):o||j},C.push(e),e},t.line=function(t){function e(t){o=e.x(),i=e.y();var a=d3.line().x(function(t){return g(o(t))}).y(function(t){return x(i(t))});t.attr("id",s),n=t.selectAll("path").data(function(t){return[t]}),h=t.selectAll(".hoverdot").data(["hoverdot"]),n=n.enter().append("path").attr("class","line").merge(n),h=h.enter().append("circle").attr("class","hoverdot").attr("pointer-events","none").style("display","none").merge(h),r&&a.curve(r),n.attr("fill","none").attr("d",function(t){return a(t.data())}),d.each(function(t,e){n.attr(e,t)})}var n,r,o,i,u,l,s=t||a(),f=[],d=d3.map();d.set("stroke",c()),d.set("stroke-width",1);var h,p,m,y,v=d3.bisector(function(t){return e.x()(t)}).right;return e.attr=function(t){return 1===arguments.length?d.get(t):(2===arguments.length&&d.set(arguments[0],arguments[1]),e)},e.curve=function(t){return arguments.length?(r=t,e):r},e.data=function(t){return arguments.length?(f=t,u=null,l=null,e):f},e.find=function(t){if(e.x()(f[0])<=t&&t<=e.x()(f[f.length-1])){var n,r=v(f,t),o=f[r-1],i=f[r];o&&i?t-e.x()(o)>e.x()(i)-t?n=i:(n=o,r-=1):o?(n=o,r-=1):n=i}return n?r:-1},e.hover=function(t){return arguments.length?(m=t,e):m},e.hover_in=function(t){return arguments.length?(p=t,e):p},e.hover_out=function(t){return arguments.length?(y=t,e):y},e.id=function(){return s},e.mouse_in=function(){h.style("display",null).attr("r",3).attr("fill",d.get("stroke")),"function"==typeof p&&p.call(n.node(),h.node())},e.mouse_move=function(t){var r=e.find(t),o=f[r];o?(h.style("display",null).attr("cx",g(e.x()(o))).attr("cy",x(e.y()(o))),"function"==typeof m&&m.call(n.node(),o,h.node())):e.mouse_out()},e.mouse_out=function(){h.style("display","none"),"function"==typeof y&&y.call(h.node())},e.remove=function(){var t=q.indexOf(e);t!=-1&&q.splice(t,1)},e.x=function(t){return arguments.length?(o=t,e):o||S},e.x_extent=function(){return u||(u=d3.extent(f,e.x())),u},e.y=function(t){return arguments.length?(i=t,e):i||j},e.y_extent=function(){return l||(l=d3.extent(f,e.y())),l},q.push(e),e},t.scatter=function(t){function e(t){r=e.x(),o=e.y(),t.attr("id",i),n=t.selectAll(".dot").data(function(t){return t.data()}),s=t.selectAll(".hoverdot").data(["hoverdot"]),n=n.enter().append("circle").attr("class","dot").merge(n),s=s.enter().append("circle").attr("class","hoverdot").style("display","none").merge(s),n.attr("cx",function(t){return g(r(t))}).attr("cy",function(t){return x(o(t))}),l.each(function(t,e){n.attr(e,t)}),s.attr("fill",l.get("fill"))}var n,r,o,i=t||a(),u=[],l=d3.map();l.set("fill",c()),l.set("r",1);var s,f,d,h,p=d3.bisector(function(t){return e.x()(t)}).left;return e.attr=function(t){return 1===arguments.length?l.get(t):(2===arguments.length&&l.set(arguments[0],arguments[1]),e)},e.data=function(t){return arguments.length?(u=t,e):u},e.hover=function(t){return arguments.length?(d=t,e):d},e.hover_in=function(t){return arguments.length?(f=t,e):f},e.hover_out=function(t){return arguments.length?(h=t,e):h},e.id=function(){return i},e.mouse_in=function(){s.style("display",null),"function"==typeof f&&f.call(s.node())},e.mouse_move=function(t){if(e.x()(u[0])<=t&&t<=e.x()(u[u.length-1])){var r,o=p(u,t),i=u[o-1],a=u[o];if(i&&a?t-e.x()(i)>e.x()(a)-t?r=a:(r=i,o-=1):i?(r=i,o-=1):r=a,r){s.style("display",null).attr("cx",g(e.x()(r))).attr("cy",x(e.y()(r)));var c=l.get("r");"function"==typeof c?c=c(r)+2:c+=2,s.attr("r",c),"function"==typeof d&&d.call(n.nodes()[o],r,o,u,s.node())}}else e.mouse_out()},e.mouse_out=function(){s.style("display","none"),"function"==typeof h&&h.call(s.node())},e.remove=function(){var t=D.indexOf(e);t!=-1&&D.splice(t,1)},e.x=function(t){return arguments.length?(r=t,e):r||S},e.y=function(t){return arguments.length?(o=t,e):o||j},D.push(e),e},t.legend=function(t){function e(t){t.attr("id",r).attr("text-anchor","nw"===i||"sw"===i?"start":"end"),g.each(function(e,n){t.attr(n,e)});var e=t.selectAll("g").data("sw"===i||"se"===i?o.slice().reverse():o);e.exit().remove(),e=e.enter().append("g").merge(e),e.attr("transform",function(t,e){var n,r;return n="nw"===i||"sw"===i?1+s.left:1+d-u-s.right,r="sw"===i||"se"===i?h-l-s.bottom-e*(l+c):s.top+e*(l+c),"translate("+n+","+r+")"});var n=e.selectAll("rect").data(function(t){return[t]});n=n.enter().append("rect").merge(n),n.attr("width",u).attr("height",l).attr("fill",function(t){return t.item.attr("fill")||t.item.attr("stroke")});var a=e.selectAll("text").data(function(t){return[t]});a=a.enter().append("text").merge(a),a.attr("dominant-baseline","central").attr("x","nw"===i||"sw"===i?u+f:-f).attr("y",l/2).text(function(t){return t.label})}var n,r=t||a(),o=[],i="ne",u=20,l=20,c=2,s={top:0,right:0,bottom:10,left:10},f=5,g=d3.map();return g.set("font-family","sans-serif"),g.set("font-size",10),e.attr=function(t){return 1===arguments.length?g.get(t):(2===arguments.length&&g.set(arguments[0],arguments[1]),e)},e.box_height=function(t){return arguments.length?(l=t,e):l},e.box_padding=function(t){return arguments.length?(c=t,e):c},e.box_width=function(t){return arguments.length?(u=t,e):u},e.container=function(t){return arguments.length?(n=t,e):n},e.id=function(){return r},e.item=function(t,n){if(1===arguments.length)return n=o.find(function(e){return e.label===t}),n?n.item:null;if("string"==typeof n){var r=n;n={attr:function(){return r}}}if(2===arguments.length){var i=o.findIndex(function(t){return t.item===n||r===t.item.attr()});i>-1?o[i]={label:t,item:n}:o.push({label:t,item:n})}return e},e.label_padding=function(t){return arguments.length?(f=t,e):f},e.location=function(t){return arguments.length?(i=t,e):i},e.margin=function(t){return arguments.length?(s.top=0===t.top?0:t.top||s.top,s.right=0===t.right?0:t.right||s.right,s.bottom=0===t.bottom?0:t.bottom||s.bottom,s.left=0===t.left?0:t.left||s.left,e):s},e.remove=function(t){if(arguments.length){var n=o.findIndex(function(e){return"string"==typeof t?e.label===t:e.item===t});n!==-1&&o.splice(n,1)}else{var r=G.indexOf(e);r!=-1&&G.splice(r,1)}},G.push(e),e},t.domain=function(e){return arguments.length?(k=e,t):k},t.each=function(t){"function"==typeof t&&(N.forEach(t),q.forEach(t),D.forEach(t))},t.height=function(e){return arguments.length?(L=e,t):L},t.hover=function(e){return arguments.length?(F=e,t):F},t.id=function(){return z},t.margin=function(e){return arguments.length?(M.top=0===e.top?0:e.top||M.top,M.right=0===e.right?0:e.right||M.right,M.bottom=0===e.bottom?0:e.bottom||M.bottom,M.left=0===e.left?0:e.left||M.left,t):M},t.mouse_in=function(e){return arguments.length?(O=e,t):O},t.mouse_out=function(e){return arguments.length?(I=e,t):I},t.range=function(e){return arguments.length?(E=e,t):E},t.width=function(e){return arguments.length?(B=e,t):B},t.x=function(e){return arguments.length?(S=e,t):S},t.x_axis=function(e){return arguments.length?(p=e,t):p},t.x_grid=function(e){return arguments.length?(y=e,t):y},t.x_label=function(e){return arguments.length?(v=e,t):v},t.x_location=function(e){return arguments.length?(m=e,t):m},t.x_scale=function(e){return arguments.length?(g=e,t):g},t.y=function(e){return arguments.length?(j=e,t):j},t.y_axis=function(e){return arguments.length?(_=e,t):_},t.y_grid=function(e){return arguments.length?(A=e,t):A},t.y_label=function(e){return arguments.length?(w=e,t):w},t.y_location=function(e){return arguments.length?(b=e,t):b},t.y_scale=function(e){return arguments.length?(x=e,t):x},t}e.linker=function(){function t(){}var e={};return t.link=function(n){return e[n.id()]=n,n.hover(t.hover).mouse_out(t.mouse_out).mouse_in(t.mouse_over),t},t.unlink=function(n){return delete e[n.id()],n.hover(null).mouse_out(null).mouse_in(null),t},t.hover=function(t,n){for(var r in e)r!==t&&e.hasOwnProperty(r)&&e[r].each(function(t){t.hover()&&t.mouse_move(n)})},t.mouse_out=function(t){for(var n in e)n!==t&&e.hasOwnProperty(n)&&e[n].each(function(t){t.hover()&&t.mouse_out()})},t.mouse_over=function(t){for(var n in e)n!=t&&e.hasOwnProperty(n)&&e[n].each(function(t){t.hover()&&t.mouse_in()})},t},t.chart=e,Object.defineProperty(t,"__esModule",{value:!0})});